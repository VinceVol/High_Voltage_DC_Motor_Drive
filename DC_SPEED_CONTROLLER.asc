Version 4.1
SHEET 1 2104 1660
WIRE -928 -1456 -1088 -1456
WIRE -800 -1456 -928 -1456
WIRE -736 -1456 -800 -1456
WIRE -1088 -1392 -1088 -1456
WIRE -928 -1392 -928 -1456
WIRE -800 -1392 -800 -1456
WIRE -1088 -1264 -1088 -1312
WIRE -960 -1264 -1088 -1264
WIRE -928 -1264 -928 -1328
WIRE -928 -1264 -960 -1264
WIRE -800 -1264 -800 -1312
WIRE -800 -1264 -928 -1264
WIRE -960 -1216 -960 -1264
WIRE -928 -1216 -960 -1216
WIRE -928 -1184 -928 -1216
WIRE -992 -1072 -1024 -1072
WIRE -1024 -1008 -1024 -1072
WIRE -1024 -1008 -1104 -1008
WIRE -848 -1008 -1024 -1008
WIRE -1104 -976 -1104 -1008
WIRE -848 -976 -848 -1008
WIRE -1104 -848 -1104 -896
WIRE -848 -848 -848 -896
WIRE -848 -624 -848 -768
WIRE -848 -496 -848 -544
WIRE 672 -240 624 -240
WIRE 832 -240 752 -240
WIRE 832 -192 832 -240
WIRE 496 -128 432 -128
WIRE 432 -112 432 -128
WIRE 496 -112 496 -128
WIRE 624 32 624 -240
WIRE 432 48 432 -32
WIRE 432 48 400 48
WIRE 144 80 128 80
WIRE 240 80 224 80
WIRE 288 80 256 80
WIRE 432 80 400 80
WIRE 240 112 240 80
WIRE 288 112 240 112
WIRE 432 112 432 80
WIRE 432 112 400 112
WIRE 480 112 432 112
WIRE 576 112 560 112
WIRE 48 144 48 80
WIRE 256 144 256 80
WIRE 256 144 48 144
WIRE 432 144 400 144
WIRE 432 160 432 144
WIRE 448 160 432 160
WIRE 624 160 624 128
WIRE 624 160 448 160
WIRE 704 160 624 160
WIRE 624 176 624 160
WIRE 624 176 512 176
WIRE 624 192 624 176
WIRE 448 224 448 160
WIRE 48 272 48 144
WIRE 624 320 624 272
WIRE 512 368 512 176
WIRE 784 400 720 400
WIRE 624 416 624 400
WIRE 720 416 720 400
WIRE 720 416 624 416
WIRE 624 432 624 416
WIRE 624 544 624 512
WIRE 512 640 512 432
WIRE 624 640 624 624
WIRE 624 640 512 640
WIRE 624 656 624 640
FLAG 48 272 0
FLAG 832 -192 0
FLAG 496 -112 1
FLAG 448 224 1
FLAG 624 656 0
FLAG -1104 -848 0
FLAG -848 -496 0
FLAG 704 160 Vsupply
IOPIN 704 160 Out
FLAG -992 -1072 Vtorq
IOPIN -992 -1072 Out
FLAG 784 400 Vemf
IOPIN 784 400 Out
FLAG -928 -1184 0
FLAG -736 -1456 Vangpos
IOPIN -736 -1456 Out
SYMBOL nmos 576 32 R0
SYMATTR InstName M1
SYMATTR Value BSZ900N20NS3
SYMBOL voltage 432 -16 R180
WINDOW 0 12 55 VBottom 2
WINDOW 3 5 55 VTop 2
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V2
SYMATTR Value 24
SYMBOL voltage 144 80 R90
WINDOW 0 -10 55 Left 2
WINDOW 3 156 148 Right 2
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V3
SYMATTR Value PULSE(0 3.3 0 1us 1us 49us 50us)
SYMBOL res 576 96 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R2
SYMATTR Value 22
SYMBOL voltage 656 -240 M90
WINDOW 0 -32 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName V1
SYMATTR Value 120
SYMBOL HCPL_3120 336 96 M180
SYMATTR InstName U1
SYMBOL res 240 64 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R3
SYMATTR Value 100
SYMBOL ind -864 -992 R0
SYMATTR InstName L1
SYMATTR Value 0.01
SYMATTR SpiceLine Rser=0
SYMBOL ind 608 176 R0
SYMATTR InstName LA1
SYMATTR Value 0.5m
SYMATTR SpiceLine Rser=0
SYMBOL Res 608 304 R0
SYMATTR InstName RA1
SYMATTR Value 0.6
SYMBOL voltage 624 528 R0
SYMATTR InstName VSENSE1
SYMATTR Value 0
SYMBOL Res -864 -864 R0
SYMATTR InstName RB1
SYMATTR Value 0.002
SYMBOL voltage -848 -640 R0
WINDOW 0 -133 22 Left 2
SYMATTR InstName VSENSE2
SYMATTR Value 0
SYMBOL h -1104 -992 R0
WINDOW 123 24 118 Left 2
SYMATTR Value2 0.29
SYMATTR InstName H_TORQ1
SYMATTR Value VSENSE1
SYMBOL h 624 416 R0
WINDOW 3 89 54 Left 2
WINDOW 123 90 78 Left 2
SYMATTR Value VSENSE2
SYMATTR Value2 0.29
SYMATTR InstName H_EMF1
SYMBOL diode 528 432 R180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D1
SYMBOL f -1088 -1312 R180
WINDOW 0 24 80 Left 2
WINDOW 3 24 0 Left 2
WINDOW 123 24 -22 Left 2
SYMATTR InstName FPOS1
SYMATTR Value VSENSE2
SYMATTR Value2 1
SYMBOL Cap -944 -1392 R0
SYMATTR InstName CPOS1
SYMATTR Value 1
SYMBOL Res -816 -1408 R0
SYMATTR InstName RPOS1
SYMATTR Value 1Meg
TEXT 48 -312 Left 2 ;OptoIso Circuit
TEXT 48 -280 Left 2 !.tran 1000ms
TEXT -1216 -1568 Left 2 ;F - current controlled current source\nI(VENSE2) - angular velocity modeled as current  (rad/sec)\nVoltage across CPOS - angular position modeled as voltage (rad)
