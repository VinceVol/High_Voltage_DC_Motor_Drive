* C:\users\vvolpone\Documents\Projects\CNC Mill\Linux_Controller\DC_SPEED_CONTROLLER_V2.asc
* Generated by LTspice 26.0.1 for Windows.
L1 Vtorq N024 0.01 Rser=0
RB1 N024 N026 0.002
VSENSE2 N026 0 0
H_TORQ1 Vtorq 0 VSENSE1 0.29
FPOS1 0 Vangpos VSENSE2 1
CPOS1 Vangpos 0 1
RPOS1 Vangpos 0 1Meg
V4 v_pwm 0 PULSE(0 3.3 0 10ns 10ns 10us 50us)
V5 vdi 0 PULSE(0 3.3 0 20us 20us 2500ms 5000ms)
LA2 1 N016 1.5mH Rser=0
RA2 N016 N017 6
VSENSE1 N018 2 0
H_EMF2 N017 N018 VSENSE2 0.29
R1 N008 N007 10
R5 N022 N021 10
R7 N009 N010 10
R9 N019 N020 10
R10 P001 vdi 100
V8 v_log 0 5
Q1 v_pwm N015 N011 0 2N2222
R11 N015 vdi 250
Q2 N013 N014 0 0 2N2222
R8 N014 vdi 500
Q3 N023 N025 0 0 2N2222
R2 vdi N025 1K
R3 N012 N011 100
R12 v_pwm N013 500
R13 v_log N023 1K
X§U9 NC_01 N012 0 NC_02 1 N007 N007 N005 FOD3182 ;§pnba 1)Vd)g)4)Ms)Mg1)Mg2)Vc
X§U2 NC_03 N023 0 NC_04 0 N021 N021 vcl FOD3182 ;§pnba 1)Vd)g)4)Ms)Mg1)Mg2)Vc
X§U3 NC_05 N013 0 NC_06 2 N010 N010 N004 FOD3182 ;§pnba 1)Vd)g)4)Ms)Mg1)Mg2)Vc
X§U4 NC_07 P001 0 NC_08 0 N020 N020 vcl FOD3182 ;§pnba 1)Vd)g)4)Ms)Mg1)Mg2)Vc
C1 1 N005 0.1µ
X§U5 v_log 0 N005 1 SRS0515 ;§pnba Vi+)Vi-)Vo+)Vo-
C2 2 N004 0.1µ
X§U10 v_log 0 N004 2 SRS0515 ;§pnba Vi+)Vi-)Vo+)Vo-
C3 0 vcl 0.1µ
X§U11 v_log 0 vcl 0 SRS0515 ;§pnba Vi+)Vi-)Vo+)Vo-
V1 N001 N002 SINE(0 170 60) Rser=0.1
X§U12 N003 0 N002 N001 KBPC5010 ;§pnba +)-)AC1)AC2
V2 N006 0 SINE(85 85 120)
X§U13 v_log 0 in+ in- 0 v_log 0 N028 TMCS1126x1A MODE=0 ;§pnba VS)GND)IN+)IN-)OC)VOC)VREF)VOUT
R4 N028 N027 10k
C4 N027 0 10µ
R17 0 N015 5K
R18 N025 0 10K
X§U14 N006 N008 1 irfb4227pbf ;§pnba D)G)S
X§U1 1 N022 0 irfb4227pbf ;§pnba D)G)S
X§U6 2 N019 0 irfb4227pbf ;§pnba D)G)S
X§U7 N006 N009 2 irfb4227pbf ;§pnba D)G)S
.model NPN NPN
.model PNP PNP
.lib C:\users\vvolpone\AppData\Local\LTspice\lib\cmp\standard.bjt
* OptoIso Circuit
.tran 5000ms
* F - current controlled current source\nI(VENSE2) - angular velocity modeled as current  (rad/sec)\nVoltage across CPOS - angular position modeled as voltage (rad)
* Direction
* Speed (PWM)
* V_Log_Lev
.include FOD3182.lib
.include irfb4227pbf.spi
* Library below included based on ModelFile attribute of instance X§U9, X§U2, X§U3, X§U4 (C:\users\vvolpone\Documents\Projects\CNC Mill\Linux_Controller\FOD3182.asy)
.lib AvagoHCPL3120_MOD.txt
* Library below included based on ModelFile attribute of instance X§U14, X§U1, X§U6, X§U7 (C:\users\vvolpone\Documents\Projects\CNC Mill\Linux_Controller\irfb4227pbf.asy)
.lib irfb4227pbf.spi
* Library below included based on ModelFile attribute of instance X§U12 (C:\users\vvolpone\Documents\Projects\CNC Mill\Linux_Controller\KBPC5010.asy)
.lib KBPC5010.spi
* Library below included based on ModelFile attribute of instance X§U5, X§U10, X§U11 (C:\users\vvolpone\Documents\Projects\CNC Mill\Linux_Controller\SRS0515.asy)
.lib SRS_0515_2.spi
* Library below included based on ModelFile attribute of instance X§U13 (C:\users\vvolpone\Documents\Projects\CNC Mill\Linux_Controller\TMCS1126x1A.asy)
.lib TMCS1126x1A.lib
.backanno
.end
